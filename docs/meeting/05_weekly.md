# 오픈소스 SW 기초
# 팀 프로젝트 Weekly Report - 5주차

- **프로젝트명**: NoR (Not only R)
- **팀명**: NoR 팀 (Team 7)
- **주차**: 제5주차
- **기간**: 2025.05.29 ~ 2025.06.04
- **작성자**: 최현경
- **팀원**: 최현경(32224802), 류지성(32241484), 이운길(32237627)

## 목차
1. 서론
2. Lang: DSL 언어 설계 및 처리 시스템
3. Graph: 그래프 시각화 및 프리셋
4. GUI: 구성 및 사용자 경험 설계
5. 구현 이슈 및 논의 사항
6. 결론

## 1. 서론

본 보고서는 NoR DSL 실행기 프로젝트의 최종 발표를 대비한 기술적 정리 및 구현 내용을 정리하기 위한 목적으로 작성되었다. 이전 주차까지의 구현 과정을 기반으로, 본 보고서에서는 언어 문법, 파서 및 실행기 구조, 시각화 처리 방식, 그리고 GUI 설계 전반에 대한 내용을 종합적으로 정리하고 있다.

5주차 개발 기간 동안, 전체 기능의 통합 및 시연 가능한 형태의 데모 구성에 집중하였으며, 주요 구현 이슈와 해결 방식, 문법 확장 방향, GUI 편의 기능 개선 등 발표 시 강조할 핵심 포인트를 정리하였다.

특히 이번 보고서는 단순한 구현 기록을 넘어, 시연 가능한 형태의 완성도를 기준으로 기술 구조를 설명하고, 사용자 흐름에 따라 DSL 명령어가 해석되고 시각화되는 전 과정을 명확히 기술하였다. 이를 통해 최종 발표 시, NoR DSL의 직관성, 유연성, 확장 가능성을 효과적으로 전달할 수 있는 기반 자료로 삼고자 한다.

## 2. Lang: DSL 언어 설계 및 처리 시스템

### 2.1 DSL 설계 철학

NoR DSL은 그래프 시각화 도구를 다루는 비전문가도 손쉽게 고품질 시각화를 생성할 수 있도록, 자연어 유사 구문과 직관적 명령어 체계를 중심으로 설계되었다. 이는 초기에 설정한 목표이며 이를 바탕으로 지금까지 계속해서 개발을 진행해왔다. DSL은 "x축은 시간", "스타일은 논문용"처럼 한글 문장 기반 입력 구조를 사용하며, 내부적으로는 시각적 속성값을 자동으로 매핑하거나 스타일 프리셋을 적용하는 방식으로 설계되었다. 이로써 사용자 친화성과 자동화된 정확성을 동시에 달성하고자 하였다.

### 2.2 주요 문법 체계

사용자가 입력하는 DSL 명령어는 다음과 같은 분류로 구성된다:

1. **그래프 생성 및 시각화 트리거**
   - 그래프의 이름을 정하고, 시각화 명령을 실행하는 역할을 담당한다.

2. **속성 설정 명령어**
   - x축, y축 이름, 제목, 범례 등 기본 속성뿐 아니라, 스타일, 색상, 선 굵기, 마커 형태 등 시각적 요소들을 설정한다.

3. **프리셋 및 추상어 처리**
   - "논문용", "크게", "빨강" 등 추상화된 표현을 사용하면, 내부적으로 사전에 정의된 속성값으로 자동 변환된다.

4. **데이터 입력 관련 구문**
   - CSV 파일에서 x, y 데이터를 추출하여 시각화에 사용하는 방식 또한 명령어 기반으로 제공되도록 설계하였다.

이와 같은 명령어 체계는 단순 키워드 나열이 아니라 명확한 문장 구조와 의미 기반 패턴으로 구성되어 있어, 사용자가 '의도한 그래프'를 명확히 표현할 수 있도록 완성시켰다.

### 2.3 파서 및 AST 처리 방식

DSL로 입력된 명령어들은 파서를 통해 문법 구조를 분석하고, 이를 기반으로 명령어 리스트 형태의 AST(추상 구문 트리)로 변환된다. 이 AST는 그래프 실행기가 순차적으로 해석하며, 내부적으로 matplotlib 라이브러리를 활용한 시각화 과정을 수행한다.

초기 파서 구현에서는 줄바꿈, 공백, 빈 벡터 등의 예외로 인해 문법 에러가 발생했으나, 이를 해결하기 위해 벡터 정의 구문을 빈 벡터와 비어있지 않은 벡터로 분리하고, 예상되는 토큰을 세밀히 구분하여 처리할 수 있도록 문법을 보완하였다.

### 2.4 명령 실행기 처리 흐름

파서로부터 전달된 AST는 내부 명령어 리스트로 해석되어, 그래프 생성기에서 순차적으로 처리된다.

예를 들어 "그래프생성" → "스타일설정" → "속성적용" → "그리기"라는 일련의 흐름에 따라, 시각화 구성 요소가 하나씩 적용되고 마지막에 이미지로 출력된다.

스타일 프리셋의 경우, "스타일은 논문용"과 같이 입력하면 사전에 정의된 색상, 선 스타일, 폰트 등을 일괄 적용하며, "크게", "중간" 등 그래프 크기도 추상어 기반으로 처리된다.

또한 "파랑", "회색" 등의 한글 색상 입력은 HEX 코드로 자동 변환되며, 이 변환 로직은 내부 유틸 함수로 별도 구현되어 있다.

### 2.5 정리

모든 문법적, 의미적 검사를 통과한 명령어들은 실행기로 전달된다. 실행기는 파스 트리를 순회하며 각 명령어에 해당하는 실제 동작을 수행한다. 예를 들어 그래프생성 "내 그래프" 명령을 만나면, 새로운 그래프를 그리기 위한 준비를 시작하고, 그래프의 이름을 "내 그래프"로 설정한다. 이후 "제목은 '월별 수익'", "X축의 이름은 '월'", "데이터는 [...]"등의 명령어를 통해 그래프 객체의 속성들이 순차적으로 설정된다.

이러한 설정이 모두 완료된 후 사용자가 "그리기" 또는 "저장하기" 명령을 입력하면, 실행기는 그동안 누적된 설정 정보를 종합하여 실제 그래프를 생성하거나 이미지로 저장한다. 이때 내부적으로는 graph.py 모듈이 호출되며, matplotlib 라이브러리를 통해 시각화가 수행된다.

실행 도중 파일 저장 실패와 같은 예외 상황이 발생할 수 있으며, 이 경우 사용자에게 오류 메시지를 제공한다. 또한 디버깅 기능을 활성화하면 상세한 실행 로그를 출력함으로써, 오류 위치나 원인을 빠르게 파악할 수 있다.

이처럼 NoR 언어는 파싱 → 의미 분석 → 실행이라는 구조화된 처리 흐름을 기반으로 설계되었으며, 각 단계에서 사용자에게 명확한 피드백을 제공하는 것을 목표로 한다. 이러한 설계는 nor.py의 NoR 클래스가 총괄하며, DSL을 실제 시각화 명령으로 안전하게 변환하고 실행하는 핵심 역할을 담당한다.

## 3. Graph: 시각화 처리 구조

NoR 프로젝트는 최종적으로 사용자가 입력한 DSL 명령어를 바탕으로 시각화된 그래프 이미지를 생성하고, 이를 웹 인터페이스 상에서 바로 확인할 수 있도록 구성하였다. 내부적으로는 matplotlib를 활용해 실제 그래프를 렌더링하며, 다양한 스타일과 시각적 요소들이 적용될 수 있도록 설계했다.

특히, 다음과 같은 시각화 요소들이 반영되도록 하였다:

1. **스타일 프리셋 시스템**
   - "논문용", "색감 강조"와 같은 추상 명령어를 입력하면, 내부적으로 사전에 정의된 색상, 폰트, 선 굵기, 마커 크기 등을 자동 적용하도록 하였다. 이로써 사용자는 복잡한 시각화 옵션을 몰라도 고품질 그래프를 빠르게 생성할 수 있다.

2. **속성 매핑 처리**
   - "굵기는 3", "x축은 날짜"와 같이 수치적/문자적 속성을 입력하면, 해당 값이 matplotlib의 실제 옵션으로 자동 매핑되도록 구성하였다. 색상도 "빨강", "회색" 등 한글 입력을 HEX 코드로 변환하여 적용하였다.

3. **출력 처리 및 저장**
   - 렌더링된 이미지는 백엔드에서 임시 이미지 파일로 저장된 후, 프론트엔드에 전달되어 실시간 표시된다. 추후 저장 기능은 PNG뿐 아니라 PDF 등 확장 가능한 포맷으로 보완할 수 있도록 설계되어 있다.

## 4. GUI: 구성 및 사용자 경험 설계

본 프로젝트의 그래픽 사용자 인터페이스(GUI)는 NoR DSL 언어를 실제로 실행하고 그 결과를 즉시 확인할 수 있도록 하는 인터랙티브 실행기의 역할을 수행한다. 사용자는 별도의 개발 지식 없이 명령어를 입력하고 그래프를 생성할 수 있으며, GUI를 통해 시각적 피드백을 실시간으로 얻을 수 있다.

### 4.1 구성 목표

GUI는 다음의 목표를 중심으로 설계되었다:

1. DSL 입력 → 실행 → 결과 확인의 흐름을 직관적으로 연결할 것
2. 에러 메시지, 실행 로그, 도움말 등 사용자 피드백을 즉각적으로 제공할 것
3. 초심자도 쉽게 접근할 수 있도록 시각적 구조와 용어를 한글 중심으로 구성할 것
4. 데스크톱 뿐 아니라 추후 웹 환경에서도 확장 가능한 구조로 설계할 것

### 4.2 GUI 레이아웃 및 주요 기능

GUI는 좌측 명령어 입력 패널, 우측 시각화 결과 패널, 하단 실행 로그 영역으로 구성되며, 상단에는 다양한 기능 버튼이 배치되어 있다.

| 위치 | 구성 요소 | 설명 |
|------|-----------|------|
| 좌측 상단 | NoR 로고 | 클릭 시 Intro 화면 또는 초기화면으로 이동 |
| 좌측 패널 | DSL 입력창 (Monaco Editor) | 문법 하이라이팅, 자동 들여쓰기, 스크롤 가능 |
| 하단 패널 | 실행 로그 창 | 파싱 결과, 의미 분석 결과, 오류 메시지 출력 |
| 우측 상단 | 실행 버튼 (▶︎) | DSL 실행 (Cmd/Ctrl + Enter 단축키 지원) |
| 우측 패널 | 그래프 출력 영역 | matplotlib 렌더링 이미지 실시간 출력 |
| 상단 툴바 | Run / Reset / Samples / Light/Dark / Save 버튼 등 | 기능별 명령 수행 |
| 모달 | 도움말, 소개 창 구성 | 초심자 가이드 제공 및 프로젝트 정보 노출 |

### 4.3 시작 화면 (Intro)

NoR 실행기의 첫 진입 시 나타나는 인트로 화면은 서비스의 정체성을 전달하고 사용자 몰입을 유도하는 시각적 공간으로 구성되어 있다.

- 전체 배경은 어두운 톤의 블루 계열로 디자인하였으며, 중앙에는 NoR 로고와 함께 "데이터, 한글로 그리다"라는 핵심 슬로건을 배치하였다.
- 사용자에게 시각화 기반 도구라는 인상을 직관적으로 전달하며, 하단의 입장하기 버튼을 통해 본 실행기로 진입할 수 있다.
- 애니메이션 효과는 Framer Motion을 활용하여 자연스럽게 구성하였고, 추후 Lottie 연동도 고려 중이다.

이 화면은 단순 타이틀 페이지 이상의 의미를 지니며, 브랜딩과 사용자 첫 경험 UX를 동시에 고려한 진입 구조로 설계했다.

### 4.4 About NoR 모달 구성

상단 메뉴에서 About nor 버튼을 클릭하면 프로젝트의 전반적 배경과 기술 정보를 요약한 모달이 화면 중앙에 출력된다. 이 페이지는 프로젝트 외부 소개용으로도 활용 가능하도록 구성되었으며, 설계 철학, 프로젝트 기간, 팀 소개, 깃허브 정보 등이 포함된다.

### 4.5 도움말(Help) 모달 구성

초보 사용자의 빠른 학습을 돕기 위해 도움말 창(Help) 기능도 GUI에 포함되었다. 사용자는 도움말 버튼을 클릭하여 주요 DSL 문법과 사용 예제를 참조할 수 있다.

도움말은 단순 문서가 아닌 실시간 문맥 안내 역할을 수행하는 가이드 도구이며, 향후 자동완성과 연동하여 동적으로 확장될 수 있도록 설계되었다.

이처럼 NoR의 GUI는 단순한 실행기가 아니라, 시각화 편의성과 언어 학습 지원을 모두 고려한 통합 사용자 경험 환경으로 구현되었다. 초기 진입부터 실행, 오류 확인, 도움말 학습까지 전체 플로우가 매끄럽게 연결되도록 설계함으로써, 사용자 친화성과 기술적 구조의 균형을 확보하였다.

## 5. 시각화 처리 및 GUI 구현

본 프로젝트는 DSL 언어 설계, 파서 구축, 그래프 렌더링, 그리고 GUI 인터페이스까지 다양한 모듈이 병렬로 개발되었으며, 각 과정에서 예상치 못한 기술적 문제와 설계 충돌이 반복적으로 발생하였다. 이에 따라 팀은 지속적인 회의와 리팩토링을 통해 다음과 같은 이슈들을 해결해나갔다.

### 5.1 언어 처리 관련 이슈

1) **벡터 파싱 오류**
   - 문제: DSL에서 데이터 입력 시 데이터는 [1,2,3], [4,5,6]과 같이 입력할 경우, 줄바꿈이나 공백 처리 문제로 lark.exceptions.UnexpectedToken 오류 발생
   - 해결: 벡터 규칙을 empty_vector와 non_empty_vector로 분리하여 처리. 줄바꿈을 명시적으로 허용하고, 빈 벡터와 일반 벡터를 구분할 수 있도록 문법 재구성

2) **타입 불일치 허용 문제**
   - 문제: 데이터는 [1,2,"셋"]과 같이 숫자와 문자열이 혼합된 벡터가 입력될 경우 타입 불일치가 발생
   - 해결: SemanticAnalyzer 클래스를 통해 벡터 내부 요소들의 타입 일관성을 점검하도록 설계. 문자열-숫자 혼합 사용 시 에러로 처리하고, 구체적인 라인과 내용이 포함된 한국어 에러 메시지를 반환

3) **속성-값 매핑 오류**
   - 문제: "색은 노랑" 등에서 노랑이라는 값이 내부 설정에 없을 경우 무시되거나 실행 중 오류 발생
   - 해결: nor_config.py에 색상, 마커, 선 스타일 등의 유효값을 정의한 후, 의미 분석기에서 이를 참조하여 유효성 검사 수행. 에러 발생 시 "색상 '노랑'은 지원되지 않습니다"와 같이 구체적 피드백을 제공

### 5.2 실행기 및 그래프 렌더링 관련 이슈

1) **속성 초기화 타이밍 문제**
   - 문제: "제목은 '매출'"과 같은 속성이 "그래프생성" 이전에 입력될 경우, 실행기가 처리할 대상 객체가 없어 오류 발생
   - 해결: 의미 분석 시 문장 순서를 검사하여 "그래프생성"이 반드시 첫 명령어로 위치하도록 제한. 위반 시 "그래프가 생성되기 전에 속성을 정의할 수 없습니다"와 같은 피드백 제공

2) **스타일 프리셋 적용 순서 문제**
   - 문제: "스타일은 논문용"을 먼저 지정한 뒤, "색은 초록" 등 개별 속성을 설정하면 덮어씌움 처리에서 충돌 발생
   - 해결: 스타일 프리셋을 적용할 경우 우선순위를 가지되, 개별 속성 입력이 있을 시 해당 값을 우선 적용하는 방식으로 처리 로직 개선

### 5.3 GUI 및 프론트엔드 관련 이슈

1) **테마 전환 시 상태 초기화 문제**
   - 문제: 다크모드 ↔ 라이트모드 전환 시 코드 입력창, 출력 그래프, 로그 등이 모두 초기화됨
   - 해결: 테마 전환 기능을 상태 기반으로 관리하여 입력값, 실행결과, 그래프를 유지하도록 상태관리 시스템(state_manager.js) 리팩토링

2) **입력창 UI 깨짐 및 그래프 위치 이동**
   - 문제: New Pad 클릭 시 새 창이 생성되지만, 그래프 출력 위치와 로그 위치가 서로 뒤바뀌거나 의도하지 않게 정렬됨
   - 해결: 고정된 위치 값을 CSS로 선언하고, 새 Pad 생성 시도 시 이전 구조를 복사하여 초기화하는 방식으로 구조 유지

### 5.4 회의 및 협업 과정에서의 논의 사항

- DSL 언어의 추상화 수준과 사용자 친화성을 어느 수준까지 허용할지에 대해 지속적인 논의가 이루어졌다.
  - "색은 붉은색" 같은 자연어 처리까지 범위를 확장할지 여부는 이후 버전에서 검토하기로 결정함

- 그래프마다 옵션 구조가 다르다는 점에서, "산점도"와 "막대그래프"의 속성 처리 방식을 어떻게 통합할지 고민이 있었다.
  - "옵션" 딕셔너리 내부 구조를 타입별로 분기 처리하되, 실행기 내부에서 종류를 기준으로 옵션 파서를 분기하는 구조로 정리함

- 발표 영상 제작과 문서 정리 시 역할 분담을 명확히 하고, 발표자(이운길), 영상 제작자(최현경), 기술 정리 담당자(류지성)로 업무를 나누어 진행함

### 5.5 회의 일정 및 최종 준비

- 5월 28일(화) 온라인 회의
  - 스크립트 실행기 완성 후 통합 테스트 진행
  - 그래프 저장 위치 설정 기능 및 로그 출력 구조 점검

- 6월 2일(일) 최종 발표 전 회의
  - 발표 시나리오 확정
  - 문서/영상 정리 상태 공유
  - 배포 관련 파일 구조 재정리 및 GitHub 정리 준비

이처럼 본 프로젝트는 실행기/언어/UI가 유기적으로 얽혀 있는 구조이기 때문에 단순 모듈 개발을 넘어서 구조적 통합과 사용자 경험 중심의 반복 설계가 핵심 과제였다. 각 문제 해결은 대부분 팀 내부의 지속적인 피드백 루프를 통해 이뤄졌으며, 이는 최종 데모와 발표 준비에 있어 큰 시너지를 발휘하였다.

## 6. 결론

본 프로젝트는 단순한 그래프 출력 도구 개발을 넘어, 도메인 특화 언어(DSL)의 설계부터 GUI 실행기 구축, 시각화 출력 시스템까지를 통합적으로 구현한 사례이다. 사용자가 자연스러운 한국어 명령어를 입력하면, 내부적으로 구문 분석 → 의미 분석 → 실행 과정을 거쳐 고품질의 시각화를 빠르게 생성할 수 있도록 설계되었다.

처음에는 PySimpleGUI를 기반으로 로컬 실행 형태로 출발했으나, 개발 중반부에 React 기반 웹 인터페이스로 전환하면서 확장성과 사용자 경험(UI/UX) 측면에서 큰 도약을 이뤘다. 특히, 색상 자동 매핑, 스타일 프리셋, 오류 로그 시스템 등은 사용자의 편의성을 높이는 중요한 기능으로 구현되었다.

### 6.1 프로젝트 총평

이번 프로젝트는 다음과 같은 의미를 가진 결과물로 정리할 수 있다:

1. **언어 설계와 파서 구현의 실제 경험**
   - 이론으로만 배워왔던 파스 트리, 의미 분석기 등의 개념을 직접 구현해보며 언어의 구조와 흐름을 깊이 이해할 수 있었다.

2. **기획-개발-디자인이 통합된 작업**
   - DSL 언어의 설계와 그래프 시각화의 요구 사항, GUI의 사용성까지 하나의 시스템에서 긴밀히 연동되도록 구성하였다.

3. **협업과 반복 개선 중심의 프로세스**
   - 초기 설계의 미비점을 발견할 때마다 회의를 통해 구조를 개선하고, 반복 테스트와 문서화를 병행하며 완성도를 높였다.

4. **최종 데모 및 발표를 위한 완성도 있는 결과물 구성**
   - 발표를 위한 1분짜리 시연 영상, 문서화된 시스템 설명, 그리고 그래프 샘플과 GUI 안내 페이지 등을 체계적으로 준비하여 프로젝트 결과물을 체감할 수 있게 구성하였다.

### 6.2 팀원별 회고

- **최현경**
  프론트엔드와 UI/UX를 전담하면서 처음엔 낯설었던 React, Tailwind 등의 기술을 빠르게 익혀야 했다. 특히 사용자가 직관적으로 기능을 이해할 수 있도록 시각적 흐름을 만드는 데 많은 고민이 있었다. 단순한 화면 구현을 넘어서, 기능 간 연결성과 사용자 흐름 설계의 중요성을 실감하였다. 발표 영상 제작, 디자인 레이아웃 정리 등 실질적인 사용자 경험을 마무리하는 작업에 가장 집중했던 시기였다. 협업을 통해 기술을 배우고, 프로젝트를 끝까지 책임지는 자세를 경험할 수 있었다.

- **류지성**
  언어 설계를 담당하며 Lark 기반 문법 정의부터 의미 분석, 실행기 구조까지 설계하였다. 문법이 작동하는 방식, 트리를 순회하는 구조, 타입 체크와 의미 오류 처리 등 다양한 언어 내부 로직을 구현하며 컴파일러 구조에 대한 이해가 깊어졌다. 혼자서는 할 수 없는 규모의 작업이었기에 팀의 피드백과 구조 개선 과정에서 많은 것을 배웠다. 실제 문법이 작동하고, 의미 오류를 검출하며 실행기로 전달되는 과정을 관찰하며, 추상적인 개념이 실제로 구현된다는 흥미와 성취를 느꼈다.

- **이운길**
  그래프 렌더링 기능 전반을 담당하며, matplotlib의 내부 옵션 구조를 DSL 명령어에 맞춰 커스터마이징하는 데 집중하였다. "빨강", "스타일은 논문용" 같은 문장을 어떻게 실제 속성 값으로 변환할지 설계하며, 사용자의 언어와 시스템의 파라미터를 연결하는 미들레이어의 중요성을 느꼈다. 또한 중간에 구조의 한계를 느끼고 전체 그래프 구조를 리팩토링한 경험은 유지보수성과 재사용성을 고려한 설계의 필요성을 체감하게 해주었다. 기술적인 부분뿐만 아니라 발표 구성, 문서화 전략에서도 적극적으로 아이디어를 제안하고 정리하였다.

### 6.3 향후 발전 방향

본 프로젝트는 다음과 같은 기능을 추가적으로 발전시킬 수 있다:

- **CSV 자동 파싱 및 변수 할당 기능**
  - 외부 CSV 파일을 불러오면 자동으로 x, y 데이터를 인식하여 데이터는 [...] 문장 없이도 그래프를 생성할 수 있도록 개선할 계획이다.

- **그래프 스타일 프리셋 저장/불러오기 기능**
  - 자주 사용하는 시각화 설정을 .norstyle 형식으로 저장하고, 명령어 한 줄로 불러올 수 있도록 프리셋 기능을 확장할 계획이다.

- **그래프 다운로드 및 공유 기능**
  - 실행된 그래프를 이미지로 저장하거나, 복사/붙여넣기 방식으로 외부 문서에 활용할 수 있도록 우클릭 저장 메뉴와 저장 버튼을 구현할 예정이다.

- **배포 및 사용자 피드백 수집**
  - 현재는 내부 시연용으로 작동하지만, 향후 웹으로 정식 배포하고 사용자 피드백을 받아 DSL 문법을 지속적으로 개선할 수 있도록 운영할 계획이다.

### 6.4 마무리

NoR 프로젝트는 기획 → 구현 → 검증 → 발표의 전체 사이클을 경험할 수 있었던, 매우 밀도 높은 개발 프로젝트였다. 단순히 코드 구현에 그치지 않고, 언어와 사용자 경험을 동시에 설계하고, 결과물에 대한 설명과 시연까지 완성한 점에서 실무적 완성도가 높은 사례로 평가된다.

최종 결과물을 준비하며 수차례 회의, 문서화, 시연 영상 촬영, 발표 자료 정리 등 협업과 반복 작업이 이어졌고, 팀원 각자의 강점을 살린 분담과 끊임없는 피드백이 프로젝트 완성을 가능하게 만들었다. 향후 이 프로젝트는 시각화 교육, 인터페이스 설계, 언어 실험 등 다양한 분야로 확장 가능성이 열려 있다.

이상으로 NoR DSL 프로젝트의 보고서를 마무리한다. 